"use client"

import { CircularProgress } from '@mui/material';
import { useParams } from 'next/navigation';
import React, { useContext, useEffect, useState } from 'react'
import { Line } from 'react-chartjs-2';
import { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend } from 'chart.js';
import { ThemeProvider, useTheme } from '@/Context/ThemeContext';
import SelectButton from './SelectButton';
ChartJS.register(CategoryScale, LinearScale, LineElement, PointElement, Title, Tooltip, Legend);



const CoinChart = ({ coin, currency }) => {
    const { id } = useParams();
    const [historicalData, setHistoricalData] = useState();
    const [days, setDays] = useState(1);

    const { isDarkMode } = useTheme();

    // const data = {
    //     "prices": [
    //         [
    //             1737980524300,
    //             98969.71595656675
    //         ],
    //         [
    //             1737980745972,
    //             99090.2518054974
    //         ],
    //         [
    //             1737981083610,
    //             98985.51185570715
    //         ],
    //         [
    //             1737981382095,
    //             99196.69812133335
    //         ],
    //         [
    //             1737981641009,
    //             99353.05292759562
    //         ],
    //         [
    //             1737981958425,
    //             99671.0959815722
    //         ],
    //         [
    //             1737982268650,
    //             99795.23372563251
    //         ],
    //         [
    //             1737982549867,
    //             100376.29585994672
    //         ],
    //         [
    //             1737982830794,
    //             100751.62780133018
    //         ],
    //         [
    //             1737983184518,
    //             100708.18752076487
    //         ],
    //         [
    //             1737983476931,
    //             101257.6562317738
    //         ],
    //         [
    //             1737983730165,
    //             101555.44845643648
    //         ],
    //         [
    //             1737984076658,
    //             101211.93467094473
    //         ],
    //         [
    //             1737984377616,
    //             100915.81657264066
    //         ],
    //         [
    //             1737984674647,
    //             100865.87816279364
    //         ],
    //         [
    //             1737984924314,
    //             101084.25761912613
    //         ],
    //         [
    //             1737985237029,
    //             101099.9609644291
    //         ],
    //         [
    //             1737985566264,
    //             100880.65776970831
    //         ],
    //         [
    //             1737985842713,
    //             100449.8180858236
    //         ],
    //         [
    //             1737986175937,
    //             100288.25649950601
    //         ],
    //         [
    //             1737986464388,
    //             100519.74186061068
    //         ],
    //         [
    //             1737986794735,
    //             100492.46682086331
    //         ],
    //         [
    //             1737987034532,
    //             100448.8689069728
    //         ],
    //         [
    //             1737987338847,
    //             100215.21529067314
    //         ],
    //         [
    //             1737987682350,
    //             100494.45548857351
    //         ],
    //         [
    //             1737987971518,
    //             100635.96750074225
    //         ],
    //         [
    //             1737988354027,
    //             100992.20542417062
    //         ],
    //         [
    //             1737988536942,
    //             101074.05714413538
    //         ],
    //         [
    //             1737988863602,
    //             101085.68085481902
    //         ],
    //         [
    //             1737989182329,
    //             101223.19267981165
    //         ],
    //         [
    //             1737989429462,
    //             101799.23409119532
    //         ],
    //         [
    //             1737989773753,
    //             102060.2409667616
    //         ],
    //         [
    //             1737990123216,
    //             101907.9836785745
    //         ],
    //         [
    //             1737990340465,
    //             101666.07752650573
    //         ],
    //         [
    //             1737990632105,
    //             101908.90661902404
    //         ],
    //         [
    //             1737990986148,
    //             101451.07541720156
    //         ],
    //         [
    //             1737991266339,
    //             100820.88909695663
    //         ],
    //         [
    //             1737991517122,
    //             101213.36918730735
    //         ],
    //         [
    //             1737991826804,
    //             101844.92075288657
    //         ],
    //         [
    //             1737992166075,
    //             101626.43269070031
    //         ],
    //         [
    //             1737992463164,
    //             101600.39690065892
    //         ],
    //         [
    //             1737992735367,
    //             101438.12784380822
    //         ],
    //         [
    //             1737993083371,
    //             101308.12109817204
    //         ],
    //         [
    //             1737993351106,
    //             101466.55679276197
    //         ],
    //         [
    //             1737993684351,
    //             101043.12534952544
    //         ],
    //         [
    //             1737993960680,
    //             100969.72895890116
    //         ],
    //         [
    //             1737994256878,
    //             100921.88639385653
    //         ],
    //         [
    //             1737994586856,
    //             100980.77005249378
    //         ],
    //         [
    //             1737994871081,
    //             100952.26986206445
    //         ],
    //         [
    //             1737995176147,
    //             100776.18540030187
    //         ],
    //         [
    //             1737995485475,
    //             100715.77327384027
    //         ],
    //         [
    //             1737995734601,
    //             100450.46130193408
    //         ],
    //         [
    //             1737996037380,
    //             99646.28063572603
    //         ],
    //         [
    //             1737996374935,
    //             99759.33163624181
    //         ],
    //         [
    //             1737996637913,
    //             100197.86931050428
    //         ],
    //         [
    //             1737996976873,
    //             99598.86853780368
    //         ],
    //         [
    //             1737997287621,
    //             99704.58797440025
    //         ],
    //         [
    //             1737997540108,
    //             99879.62146076949
    //         ],
    //         [
    //             1737997944070,
    //             99469.46401384466
    //         ],
    //         [
    //             1737998163949,
    //             99531.3131898093
    //         ],
    //         [
    //             1737998457150,
    //             99408.13413222959
    //         ],
    //         [
    //             1737998761472,
    //             99178.35192120481
    //         ],
    //         [
    //             1737999059821,
    //             99546.03902096149
    //         ],
    //         [
    //             1737999333787,
    //             99682.92347110216
    //         ],
    //         [
    //             1737999626156,
    //             99852.6593537019
    //         ],
    //         [
    //             1737999963636,
    //             99508.04411780233
    //         ],
    //         [
    //             1738000273673,
    //             99567.9063563471
    //         ],
    //         [
    //             1738000586143,
    //             99294.51602478731
    //         ],
    //         [
    //             1738000833176,
    //             99162.03326598273
    //         ],
    //         [
    //             1738001178281,
    //             99361.90526833752
    //         ],
    //         [
    //             1738001438028,
    //             99485.11708703627
    //         ],
    //         [
    //             1738001774843,
    //             99501.66896051486
    //         ],
    //         [
    //             1738002080930,
    //             99563.54452773796
    //         ],
    //         [
    //             1738002344228,
    //             99510.58991483905
    //         ],
    //         [
    //             1738002630859,
    //             99133.00444035826
    //         ],
    //         [
    //             1738002982785,
    //             99478.80122679356
    //         ],
    //         [
    //             1738003244573,
    //             99180.1004557425
    //         ],
    //         [
    //             1738003516701,
    //             99095.39640578379
    //         ],
    //         [
    //             1738003864620,
    //             99013.67120576206
    //         ],
    //         [
    //             1738004144853,
    //             99143.84212430805
    //         ],
    //         [
    //             1738004724418,
    //             99617.12653142966
    //         ],
    //         [
    //             1738005026618,
    //             99407.58819563102
    //         ],
    //         [
    //             1738005346922,
    //             99220.40980141223
    //         ],
    //         [
    //             1738005688973,
    //             99446.90623481451
    //         ],
    //         [
    //             1738005953222,
    //             99607.56421412471
    //         ],
    //         [
    //             1738006249626,
    //             99716.25546544499
    //         ],
    //         [
    //             1738006588927,
    //             99799.27057752507
    //         ],
    //         [
    //             1738006947143,
    //             99779.08082260471
    //         ],
    //         [
    //             1738007128955,
    //             99686.19925008988
    //         ],
    //         [
    //             1738007430232,
    //             99488.89372797846
    //         ],
    //         [
    //             1738007769695,
    //             99542.72979025569
    //         ],
    //         [
    //             1738008047838,
    //             99644.37967075614
    //         ],
    //         [
    //             1738008381430,
    //             99842.4073101898
    //         ],
    //         [
    //             1738008628056,
    //             99765.28157837458
    //         ],
    //         [
    //             1738008937721,
    //             99762.69109842453
    //         ],
    //         [
    //             1738009245429,
    //             99792.19447421699
    //         ],
    //         [
    //             1738009592849,
    //             100355.5247014037
    //         ],
    //         [
    //             1738009852205,
    //             100287.45584613095
    //         ],
    //         [
    //             1738010127552,
    //             100520.97980079195
    //         ],
    //         [
    //             1738010495204,
    //             100819.11040348244
    //         ],
    //         [
    //             1738010734027,
    //             100923.5779110539
    //         ],
    //         [
    //             1738011087531,
    //             101136.84076779395
    //         ],
    //         [
    //             1738011377319,
    //             101469.12540021144
    //         ],
    //         [
    //             1738011696580,
    //             101486.5818079567
    //         ],
    //         [
    //             1738011947686,
    //             101706.39202230053
    //         ],
    //         [
    //             1738012276596,
    //             102317.81441415535
    //         ],
    //         [
    //             1738012531270,
    //             102329.8260752723
    //         ],
    //         [
    //             1738012889862,
    //             102236.2166945222
    //         ],
    //         [
    //             1738013147613,
    //             101820.1039193206
    //         ],
    //         [
    //             1738013487710,
    //             101649.39581625407
    //         ],
    //         [
    //             1738013744275,
    //             101444.99634984396
    //         ],
    //         [
    //             1738014056779,
    //             101293.20277570744
    //         ],
    //         [
    //             1738014365479,
    //             100993.81302855891
    //         ],
    //         [
    //             1738014735269,
    //             101235.39465565585
    //         ],
    //         [
    //             1738014944101,
    //             101348.20077664164
    //         ],
    //         [
    //             1738015282672,
    //             101395.43459330825
    //         ],
    //         [
    //             1738015552248,
    //             101584.40962558467
    //         ],
    //         [
    //             1738015893302,
    //             101648.0775820951
    //         ],
    //         [
    //             1738016175982,
    //             101517.39163598503
    //         ],
    //         [
    //             1738016439549,
    //             101527.71785425469
    //         ],
    //         [
    //             1738016781544,
    //             101343.83009035027
    //         ],
    //         [
    //             1738017065872,
    //             101530.06582352339
    //         ],
    //         [
    //             1738017325993,
    //             101529.2476574261
    //         ],
    //         [
    //             1738017657720,
    //             101556.18574589428
    //         ],
    //         [
    //             1738017940751,
    //             101681.72291381206
    //         ],
    //         [
    //             1738018223777,
    //             101946.87684261949
    //         ],
    //         [
    //             1738018563585,
    //             101728.82790773972
    //         ],
    //         [
    //             1738019226573,
    //             101885.37350804979
    //         ],
    //         [
    //             1738019533821,
    //             102047.8790643674
    //         ],
    //         [
    //             1738019754551,
    //             102023.14645848931
    //         ],
    //         [
    //             1738020043090,
    //             101789.58929644682
    //         ],
    //         [
    //             1738020362380,
    //             102054.30366832689
    //         ],
    //         [
    //             1738020687712,
    //             101704.21240588141
    //         ],
    //         [
    //             1738020950274,
    //             101790.14988193804
    //         ],
    //         [
    //             1738021256840,
    //             101827.04136776399
    //         ],
    //         [
    //             1738021554050,
    //             101793.98105758998
    //         ],
    //         [
    //             1738021868902,
    //             101844.6716141942
    //         ],
    //         [
    //             1738022138804,
    //             101958.46953745594
    //         ],
    //         [
    //             1738022435508,
    //             102101.49013927419
    //         ],
    //         [
    //             1738022775134,
    //             102543.92759975587
    //         ],
    //         [
    //             1738023027938,
    //             102840.52502073756
    //         ],
    //         [
    //             1738023335329,
    //             102448.89030159275
    //         ],
    //         [
    //             1738023744609,
    //             102370.46233008914
    //         ],
    //         [
    //             1738023988645,
    //             102217.33797538154
    //         ],
    //         [
    //             1738024293158,
    //             102180.88787881203
    //         ],
    //         [
    //             1738024512940,
    //             102074.48785705512
    //         ],
    //         [
    //             1738024838888,
    //             102259.77550903753
    //         ],
    //         [
    //             1738025176434,
    //             102277.91185396908
    //         ],
    //         [
    //             1738025487721,
    //             102077.29220129835
    //         ],
    //         [
    //             1738025734545,
    //             101840.79975571838
    //         ],
    //         [
    //             1738026325363,
    //             101807.23931194899
    //         ],
    //         [
    //             1738026482930,
    //             101804.79588613195
    //         ],
    //         [
    //             1738026653359,
    //             101709.0747040797
    //         ],
    //         [
    //             1738026926992,
    //             101863.97647558762
    //         ],
    //         [
    //             1738027226994,
    //             101749.5866708445
    //         ],
    //         [
    //             1738027529104,
    //             101632.12148859567
    //         ],
    //         [
    //             1738027824224,
    //             101484.86853486362
    //         ],
    //         [
    //             1738028194824,
    //             101609.55740357673
    //         ],
    //         [
    //             1738028427702,
    //             101646.68902653434
    //         ],
    //         [
    //             1738028737789,
    //             101551.94356688109
    //         ],
    //         [
    //             1738029060155,
    //             101556.66932539259
    //         ],
    //         [
    //             1738029352709,
    //             101808.15895350443
    //         ],
    //         [
    //             1738029674042,
    //             101335.98091065917
    //         ],
    //         [
    //             1738029937743,
    //             101433.10979499303
    //         ],
    //         [
    //             1738030323931,
    //             101453.81637387133
    //         ],
    //         [
    //             1738030585623,
    //             101506.32197754453
    //         ],
    //         [
    //             1738030844220,
    //             101750.30759321612
    //         ],
    //         [
    //             1738031164398,
    //             101906.96273595226
    //         ],
    //         [
    //             1738031503749,
    //             101939.31095102426
    //         ],
    //         [
    //             1738031764090,
    //             101926.2864326172
    //         ],
    //         [
    //             1738032090775,
    //             102114.6355364492
    //         ],
    //         [
    //             1738032362683,
    //             102286.62740367916
    //         ],
    //         [
    //             1738032639538,
    //             102317.59329894843
    //         ],
    //         [
    //             1738032977318,
    //             102275.10045375035
    //         ],
    //         [
    //             1738033299762,
    //             102411.57444755935
    //         ],
    //         [
    //             1738033562821,
    //             102175.72959635212
    //         ],
    //         [
    //             1738033860666,
    //             102184.9578053655
    //         ],
    //         [
    //             1738034145540,
    //             102339.20716595121
    //         ],
    //         [
    //             1738034474998,
    //             102291.14991683947
    //         ],
    //         [
    //             1738034747660,
    //             102309.27394891546
    //         ],
    //         [
    //             1738035097027,
    //             102318.36284186659
    //         ],
    //         [
    //             1738035391368,
    //             102505.92571241932
    //         ],
    //         [
    //             1738035619452,
    //             102439.99332082397
    //         ],
    //         [
    //             1738035966084,
    //             102613.5698493088
    //         ],
    //         [
    //             1738036235605,
    //             102793.41786939924
    //         ],
    //         [
    //             1738036577939,
    //             102833.02139996018
    //         ],
    //         [
    //             1738036817734,
    //             102592.05437467458
    //         ],
    //         [
    //             1738037158867,
    //             102649.0507604843
    //         ],
    //         [
    //             1738037473158,
    //             102828.04307818257
    //         ],
    //         [
    //             1738037754398,
    //             102813.09234589514
    //         ],
    //         [
    //             1738038085043,
    //             102641.37455642717
    //         ],
    //         [
    //             1738038356042,
    //             102874.55788118065
    //         ],
    //         [
    //             1738038676882,
    //             103054.52444265709
    //         ],
    //         [
    //             1738038945299,
    //             103123.52367209834
    //         ],
    //         [
    //             1738039261309,
    //             103368.79211961152
    //         ],
    //         [
    //             1738039561272,
    //             103167.64402028179
    //         ],
    //         [
    //             1738039885551,
    //             103034.29445349437
    //         ],
    //         [
    //             1738040176107,
    //             102945.25665274692
    //         ],
    //         [
    //             1738040501963,
    //             102922.52934594444
    //         ],
    //         [
    //             1738040747978,
    //             103055.3164412615
    //         ],
    //         [
    //             1738041085413,
    //             103089.6182167857
    //         ],
    //         [
    //             1738041394296,
    //             102938.04390603593
    //         ],
    //         [
    //             1738041696630,
    //             102939.39188824652
    //         ],
    //         [
    //             1738041974270,
    //             103079.36771871387
    //         ],
    //         [
    //             1738042295638,
    //             103040.17987602757
    //         ],
    //         [
    //             1738042574298,
    //             103194.18128489993
    //         ],
    //         [
    //             1738042836963,
    //             103299.82351158441
    //         ],
    //         [
    //             1738043180207,
    //             103261.09259783565
    //         ],
    //         [
    //             1738043455423,
    //             103310.07836494315
    //         ],
    //         [
    //             1738043793817,
    //             103055.47993242787
    //         ],
    //         [
    //             1738044086617,
    //             102992.57835984608
    //         ],
    //         [
    //             1738044335641,
    //             103103.96739430228
    //         ],
    //         [
    //             1738044674998,
    //             103093.9539120532
    //         ],
    //         [
    //             1738044938726,
    //             102974.653800069
    //         ],
    //         [
    //             1738045263592,
    //             102904.92921140703
    //         ],
    //         [
    //             1738045529464,
    //             102861.64238692923
    //         ],
    //         [
    //             1738045883943,
    //             102865.93430924504
    //         ],
    //         [
    //             1738046192529,
    //             102877.32665676513
    //         ],
    //         [
    //             1738046491425,
    //             102718.67707298412
    //         ],
    //         [
    //             1738046763996,
    //             102668.91228220581
    //         ],
    //         [
    //             1738047032537,
    //             102787.13864284143
    //         ],
    //         [
    //             1738047362818,
    //             102784.05476114746
    //         ],
    //         [
    //             1738047694815,
    //             102684.42718421642
    //         ],
    //         [
    //             1738047941946,
    //             102604.44066517497
    //         ],
    //         [
    //             1738048276184,
    //             102925.52335381797
    //         ],
    //         [
    //             1738048575544,
    //             103046.21911711866
    //         ],
    //         [
    //             1738048862880,
    //             103092.05510098043
    //         ],
    //         [
    //             1738049140739,
    //             103314.31776221398
    //         ],
    //         [
    //             1738049440813,
    //             103315.06672183552
    //         ],
    //         [
    //             1738049729746,
    //             103080.91453831272
    //         ],
    //         [
    //             1738050069694,
    //             102948.97199132772
    //         ],
    //         [
    //             1738050362713,
    //             102858.07577724768
    //         ],
    //         [
    //             1738050634940,
    //             102710.47269090175
    //         ],
    //         [
    //             1738050981662,
    //             102648.32069340488
    //         ],
    //         [
    //             1738051261807,
    //             102766.35271308372
    //         ],
    //         [
    //             1738051529772,
    //             102780.38521612465
    //         ],
    //         [
    //             1738051863016,
    //             102788.75637617533
    //         ],
    //         [
    //             1738052153728,
    //             102879.83131569979
    //         ],
    //         [
    //             1738052484933,
    //             102918.8094620621
    //         ],
    //         [
    //             1738052747492,
    //             102998.18664988255
    //         ],
    //         [
    //             1738053035269,
    //             102834.4826224228
    //         ],
    //         [
    //             1738053379246,
    //             102728.38876639758
    //         ],
    //         [
    //             1738053682547,
    //             102789.8042301485
    //         ],
    //         [
    //             1738053964693,
    //             102857.83299518848
    //         ],
    //         [
    //             1738054242738,
    //             102829.9605204238
    //         ],
    //         [
    //             1738054587188,
    //             102755.14407855103
    //         ],
    //         [
    //             1738054866928,
    //             102855.90000083558
    //         ],
    //         [
    //             1738055126818,
    //             102881.73837464646
    //         ],
    //         [
    //             1738055534469,
    //             102802.61704131536
    //         ],
    //         [
    //             1738055716341,
    //             102823.38894367478
    //         ],
    //         [
    //             1738056075016,
    //             102688.45406668734
    //         ],
    //         [
    //             1738056328662,
    //             102612.36555227278
    //         ],
    //         [
    //             1738056675898,
    //             102399.96534149325
    //         ],
    //         [
    //             1738056947120,
    //             102660.71551225158
    //         ],
    //         [
    //             1738057250247,
    //             102610.28821299243
    //         ],
    //         [
    //             1738057534819,
    //             102613.04006278818
    //         ],
    //         [
    //             1738057884021,
    //             102672.26097354232
    //         ],
    //         [
    //             1738058143862,
    //             102741.93841427358
    //         ],
    //         [
    //             1738058558414,
    //             102933.50523548406
    //         ],
    //         [
    //             1738058786145,
    //             102822.77592563
    //         ],
    //         [
    //             1738059091254,
    //             102928.56737875503
    //         ],
    //         [
    //             1738059361027,
    //             102967.0985784234
    //         ],
    //         [
    //             1738059636000,
    //             103162.41888659744
    //         ],
    //         [
    //             1738059963978,
    //             102990.32047909749
    //         ],
    //         [
    //             1738060255170,
    //             102909.59692808522
    //         ],
    //         [
    //             1738060579804,
    //             102920.42771682121
    //         ],
    //         [
    //             1738060839305,
    //             102850.84028728577
    //         ],
    //         [
    //             1738061152222,
    //             102738.08198837069
    //         ],
    //         [
    //             1738061474464,
    //             102597.99324390692
    //         ],
    //         [
    //             1738061771162,
    //             102682.89980659013
    //         ],
    //         [
    //             1738062030407,
    //             102740.42074274186
    //         ],
    //         [
    //             1738062380807,
    //             102774.63206379922
    //         ],
    //         [
    //             1738062636248,
    //             102891.60179001543
    //         ],
    //         [
    //             1738062962546,
    //             102846.1967487176
    //         ],
    //         [
    //             1738063356157,
    //             102810.74822470274
    //         ],
    //         [
    //             1738063543266,
    //             102793.8749774342
    //         ],
    //         [
    //             1738063824219,
    //             102670.17811620492
    //         ],
    //         [
    //             1738064183958,
    //             102617.58204318958
    //         ],
    //         [
    //             1738064489101,
    //             102642.4592108856
    //         ],
    //         [
    //             1738064762627,
    //             102723.05848981917
    //         ],
    //         [
    //             1738065042554,
    //             102833.85654894533
    //         ],
    //         [
    //             1738065388543,
    //             102747.22663024197
    //         ],
    //         [
    //             1738065655108,
    //             102784.33565971034
    //         ],
    //         [
    //             1738065924919,
    //             102957.10565988075
    //         ],
    //         [
    //             1738066276257,
    //             102889.60670421142
    //         ],
    //         [
    //             1738066526587,
    //             102949.94605071688
    //         ],
    //         [
    //             1738066682000,
    //             102844.35305970252
    //         ]
    //     ],
    //     "market_caps": [
    //         [
    //             1737980524300,
    //             1962183306786.8462
    //         ],
    //         [
    //             1737980745972,
    //             1961937408014.7546
    //         ],
    //         [
    //             1737981083610,
    //             1963186328571.2456
    //         ],
    //         [
    //             1737981382095,
    //             1962506600418.7964
    //         ],
    //         [
    //             1737981641009,
    //             1968948665606.6375
    //         ],
    //         [
    //             1737981958425,
    //             1975099281727.2048
    //         ],
    //         [
    //             1737982268650,
    //             1978142732507.4954
    //         ],
    //         [
    //             1737982549867,
    //             1978212924347.9846
    //         ],
    //         [
    //             1737982830794,
    //             1996449825043.2969
    //         ],
    //         [
    //             1737983184518,
    //             1989536143241.8464
    //         ],
    //         [
    //             1737983476931,
    //             1996725785479.9119
    //         ],
    //         [
    //             1737983730165,
    //             2010687841944.1611
    //         ],
    //         [
    //             1737984076658,
    //             2004081371797.697
    //         ],
    //         [
    //             1737984377616,
    //             2006715843889.1616
    //         ],
    //         [
    //             1737984674647,
    //             1998860887790.3542
    //         ],
    //         [
    //             1737984924314,
    //             1998413338258.8118
    //         ],
    //         [
    //             1737985237029,
    //             2003234099973.5044
    //         ],
    //         [
    //             1737985566264,
    //             1999069563328.8657
    //         ],
    //         [
    //             1737985842713,
    //             1997092249811.6587
    //         ],
    //         [
    //             1737986175937,
    //             1987267863673.0947
    //         ],
    //         [
    //             1737986464388,
    //             1992386301039.0266
    //         ],
    //         [
    //             1737986794735,
    //             1992771231835.0154
    //         ],
    //         [
    //             1737987034532,
    //             1987840913804.006
    //         ],
    //         [
    //             1737987338847,
    //             1988280440365.1553
    //         ],
    //         [
    //             1737987682350,
    //             1991299073405.9343
    //         ],
    //         [
    //             1737987971518,
    //             1996758197113.6785
    //         ],
    //         [
    //             1737988354027,
    //             1996398535857.5898
    //         ],
    //         [
    //             1737988536942,
    //             2001240031345.6094
    //         ],
    //         [
    //             1737988863602,
    //             2003361420678.7847
    //         ],
    //         [
    //             1737989182329,
    //             2004650754808.6965
    //         ],
    //         [
    //             1737989429462,
    //             2012105740856.5798
    //         ],
    //         [
    //             1737989773753,
    //             2018331007976.343
    //         ],
    //         [
    //             1737990123216,
    //             2024324526686.689
    //         ],
    //         [
    //             1737990340465,
    //             2013142477766.995
    //         ],
    //         [
    //             1737990632105,
    //             2023599885800.2292
    //         ],
    //         [
    //             1737990986148,
    //             2016552194837.1392
    //         ],
    //         [
    //             1737991266339,
    //             1997257807458.524
    //         ],
    //         [
    //             1737991517122,
    //             2004288896066.8591
    //         ],
    //         [
    //             1737991826804,
    //             2011987789709.6523
    //         ],
    //         [
    //             1737992166075,
    //             2013747137366.6396
    //         ],
    //         [
    //             1737992463164,
    //             2013178424654.396
    //         ],
    //         [
    //             1737992735367,
    //             2011015795901.9934
    //         ],
    //         [
    //             1737993083371,
    //             2008983408352.7202
    //         ],
    //         [
    //             1737993351106,
    //             2008157709604.741
    //         ],
    //         [
    //             1737993684351,
    //             2009910076275.775
    //         ],
    //         [
    //             1737993960680,
    //             2004177838531.652
    //         ],
    //         [
    //             1737994256878,
    //             1999498959006.0085
    //         ],
    //         [
    //             1737994586856,
    //             1999776238219.1323
    //         ],
    //         [
    //             1737994871081,
    //             2001726434424.7722
    //         ],
    //         [
    //             1737995176147,
    //             1999396451721.9326
    //         ],
    //         [
    //             1737995485475,
    //             1994398177286.4924
    //         ],
    //         [
    //             1737995734601,
    //             1992912091091.976
    //         ],
    //         [
    //             1737996037380,
    //             1984113323191.5774
    //         ],
    //         [
    //             1737996374935,
    //             1976203258960.7976
    //         ],
    //         [
    //             1737996637913,
    //             1986120311391.2104
    //         ],
    //         [
    //             1737996976873,
    //             1975404949389.884
    //         ],
    //         [
    //             1737997287621,
    //             1975375106702.9966
    //         ],
    //         [
    //             1737997540108,
    //             1977010568090.281
    //         ],
    //         [
    //             1737997944070,
    //             1970345505522.583
    //         ],
    //         [
    //             1737998163949,
    //             1972603685457.857
    //         ],
    //         [
    //             1737998457150,
    //             1972129984233.8044
    //         ],
    //         [
    //             1737998761472,
    //             1965495895879.4104
    //         ],
    //         [
    //             1737999059821,
    //             1964933770846.9485
    //         ],
    //         [
    //             1737999333787,
    //             1975297654701.0366
    //         ],
    //         [
    //             1737999626156,
    //             1978798041635.7742
    //         ],
    //         [
    //             1737999963636,
    //             1976051729692.2048
    //         ],
    //         [
    //             1738000273673,
    //             1973371585106.7632
    //         ],
    //         [
    //             1738000586143,
    //             1967709249851.58
    //         ],
    //         [
    //             1738000833176,
    //             1965862285317.4111
    //         ],
    //         [
    //             1738001178281,
    //             1965862285317.4111
    //         ],
    //         [
    //             1738001438028,
    //             1965862285317.4111
    //         ],
    //         [
    //             1738001774843,
    //             1969856891284.6912
    //         ],
    //         [
    //             1738002080930,
    //             1972791956165.875
    //         ],
    //         [
    //             1738002344228,
    //             1971920548808.8389
    //         ],
    //         [
    //             1738002630859,
    //             1968573016084.8801
    //         ],
    //         [
    //             1738002982785,
    //             1965380270420.4265
    //         ],
    //         [
    //             1738003244573,
    //             1965108546651.9722
    //         ],
    //         [
    //             1738003516701,
    //             1964135983844.0757
    //         ],
    //         [
    //             1738003864620,
    //             1964452288027.1614
    //         ],
    //         [
    //             1738004144853,
    //             1959930470914.0906
    //         ],
    //         [
    //             1738004724418,
    //             1973783036099.5642
    //         ],
    //         [
    //             1738005026618,
    //             1970433980143.4685
    //         ],
    //         [
    //             1738005346922,
    //             1967875056326.4048
    //         ],
    //         [
    //             1738005688973,
    //             1965994039170.5754
    //         ],
    //         [
    //             1738005953222,
    //             1973299495801.193
    //         ],
    //         [
    //             1738006249626,
    //             1975236481008.8965
    //         ],
    //         [
    //             1738006588927,
    //             1979301736504.8167
    //         ],
    //         [
    //             1738006947143,
    //             1978220897595.412
    //         ],
    //         [
    //             1738007128955,
    //             1978220897595.412
    //         ],
    //         [
    //             1738007430232,
    //             1971678996785.3232
    //         ],
    //         [
    //             1738007769695,
    //             1969791399465.011
    //         ],
    //         [
    //             1738008047838,
    //             1972000578988.1174
    //         ],
    //         [
    //             1738008381430,
    //             1978662369876.7932
    //         ],
    //         [
    //             1738008628056,
    //             1976873135463.3074
    //         ],
    //         [
    //             1738008937721,
    //             1977254181050.4663
    //         ],
    //         [
    //             1738009245429,
    //             1975276884804.1438
    //         ],
    //         [
    //             1738009592849,
    //             1982131501735.049
    //         ],
    //         [
    //             1738009852205,
    //             1988306044341.167
    //         ],
    //         [
    //             1738010127552,
    //             1988020013513.432
    //         ],
    //         [
    //             1738010495204,
    //             1994814079437.1477
    //         ],
    //         [
    //             1738010734027,
    //             1999817487441.2568
    //         ],
    //         [
    //             1738011087531,
    //             2002962619365.4978
    //         ],
    //         [
    //             1738011377319,
    //             2010530326805.268
    //         ],
    //         [
    //             1738011696580,
    //             2015548117187.0442
    //         ],
    //         [
    //             1738011947686,
    //             2015105506208.461
    //         ],
    //         [
    //             1738012276596,
    //             2017076885094.8735
    //         ],
    //         [
    //             1738012531270,
    //             2027315523679.528
    //         ],
    //         [
    //             1738012889862,
    //             2026203977400.5183
    //         ],
    //         [
    //             1738013147613,
    //             2024570765899.0273
    //         ],
    //         [
    //             1738013487710,
    //             2019172764571.8716
    //         ],
    //         [
    //             1738013744275,
    //             2013509895086.6265
    //         ],
    //         [
    //             1738014056779,
    //             2011857587480.327
    //         ],
    //         [
    //             1738014365479,
    //             2000301738552.2605
    //         ],
    //         [
    //             1738014735269,
    //             2005997246959.0217
    //         ],
    //         [
    //             1738014944101,
    //             2004821511483.308
    //         ],
    //         [
    //             1738015282672,
    //             2011522812091.8215
    //         ],
    //         [
    //             1738015552248,
    //             2012912823636.1921
    //         ],
    //         [
    //             1738015893302,
    //             2014405086161.1626
    //         ],
    //         [
    //             1738016175982,
    //             2013500520427.453
    //         ],
    //         [
    //             1738016439549,
    //             2011391721474.6594
    //         ],
    //         [
    //             1738016781544,
    //             2007738622161.3716
    //         ],
    //         [
    //             1738017065872,
    //             2011140979302.2556
    //         ],
    //         [
    //             1738017325993,
    //             2011262051718.6777
    //         ],
    //         [
    //             1738017657720,
    //             2013724616736.638
    //         ],
    //         [
    //             1738017940751,
    //             2014918310266.3862
    //         ],
    //         [
    //             1738018223777,
    //             2019804182112.9333
    //         ],
    //         [
    //             1738018563585,
    //             2017597184688.3171
    //         ],
    //         [
    //             1738019226573,
    //             2018395055845.9155
    //         ],
    //         [
    //             1738019533821,
    //             2019617038347.809
    //         ],
    //         [
    //             1738019754551,
    //             2022291604789.723
    //         ],
    //         [
    //             1738020043090,
    //             2019356480980.3247
    //         ],
    //         [
    //             1738020362380,
    //             2022329630010.016
    //         ],
    //         [
    //             1738020687712,
    //             2016046093049.3892
    //         ],
    //         [
    //             1738020950274,
    //             2016255132803.0884
    //         ],
    //         [
    //             1738021256840,
    //             2019351642512.732
    //         ],
    //         [
    //             1738021554050,
    //             2017172083578.448
    //         ],
    //         [
    //             1738021868902,
    //             2016935546374.9507
    //         ],
    //         [
    //             1738022138804,
    //             2019295541213.5288
    //         ],
    //         [
    //             1738022435508,
    //             2020768161655.183
    //         ],
    //         [
    //             1738022775134,
    //             2023193492716.4248
    //         ],
    //         [
    //             1738023027938,
    //             2023193492716.4248
    //         ],
    //         [
    //             1738023335329,
    //             2030120448589.601
    //         ],
    //         [
    //             1738023744609,
    //             2027297901899.861
    //         ],
    //         [
    //             1738023988645,
    //             2025840609772.4868
    //         ],
    //         [
    //             1738024293158,
    //             2024373625700.2092
    //         ],
    //         [
    //             1738024512940,
    //             2023035126305.4573
    //         ],
    //         [
    //             1738024838888,
    //             2023437691460.722
    //         ],
    //         [
    //             1738025176434,
    //             2027057206145.188
    //         ],
    //         [
    //             1738025487721,
    //             2022982422131.5627
    //         ],
    //         [
    //             1738025734545,
    //             2019962510894.2673
    //         ],
    //         [
    //             1738026325363,
    //             2018734732197.6094
    //         ],
    //         [
    //             1738026482930,
    //             2017489723453.176
    //         ],
    //         [
    //             1738026653359,
    //             2016906030345.5625
    //         ],
    //         [
    //             1738026926992,
    //             2017471426462.6536
    //         ],
    //         [
    //             1738027226994,
    //             2019072452371.925
    //         ],
    //         [
    //             1738027529104,
    //             2014251355142.7427
    //         ],
    //         [
    //             1738027824224,
    //             2012632726175.8132
    //         ],
    //         [
    //             1738028194824,
    //             2011345508714.5532
    //         ],
    //         [
    //             1738028427702,
    //             2013480239543.9734
    //         ],
    //         [
    //             1738028737789,
    //             2013821490768.4314
    //         ],
    //         [
    //             1738029060155,
    //             2010921250733.6794
    //         ],
    //         [
    //             1738029352709,
    //             2017569102702.9082
    //         ],
    //         [
    //             1738029674042,
    //             2017225415763.221
    //         ],
    //         [
    //             1738029937743,
    //             2008234630352.1848
    //         ],
    //         [
    //             1738030323931,
    //             2008171801744.0366
    //         ],
    //         [
    //             1738030585623,
    //             2012442622090.2922
    //         ],
    //         [
    //             1738030844220,
    //             2012188604600.0154
    //         ],
    //         [
    //             1738031164398,
    //             2019462007523.21
    //         ],
    //         [
    //             1738031503749,
    //             2020529552726.5193
    //         ],
    //         [
    //             1738031764090,
    //             2019392217442.519
    //         ],
    //         [
    //             1738032090775,
    //             2021411945129.2715
    //         ],
    //         [
    //             1738032362683,
    //             2026913649790.5984
    //         ],
    //         [
    //             1738032639538,
    //             2027527270528.6409
    //         ],
    //         [
    //             1738032977318,
    //             2026820269334.418
    //         ],
    //         [
    //             1738033299762,
    //             2027642030606.1
    //         ],
    //         [
    //             1738033562821,
    //             2028908185738.5159
    //         ],
    //         [
    //             1738033860666,
    //             2023354578860.69
    //         ],
    //         [
    //             1738034145540,
    //             2026037796249.9473
    //         ],
    //         [
    //             1738034474998,
    //             2029161267694.991
    //         ],
    //         [
    //             1738034747660,
    //             2026195122764.1975
    //         ],
    //         [
    //             1738035097027,
    //             2026875522915.52
    //         ],
    //         [
    //             1738035391368,
    //             2030583254552.7483
    //         ],
    //         [
    //             1738035619452,
    //             2030060133774.8794
    //         ],
    //         [
    //             1738035966084,
    //             2030503700729.9204
    //         ],
    //         [
    //             1738036235605,
    //             2037154782266.8484
    //         ],
    //         [
    //             1738036577939,
    //             2036556699207.3276
    //         ],
    //         [
    //             1738036817734,
    //             2034829989211.3442
    //         ],
    //         [
    //             1738037158867,
    //             2034226105482.5728
    //         ],
    //         [
    //             1738037473158,
    //             2037904323221.6328
    //         ],
    //         [
    //             1738037754398,
    //             2037762259224.3945
    //         ],
    //         [
    //             1738038085043,
    //             2037365342805.6113
    //         ],
    //         [
    //             1738038356042,
    //             2034142470729.6982
    //         ],
    //         [
    //             1738038676882,
    //             2042179763912.4258
    //         ],
    //         [
    //             1738038945299,
    //             2043635222607.4802
    //         ],
    //         [
    //             1738039261309,
    //             2048786173138.9775
    //         ],
    //         [
    //             1738039561272,
    //             2044275066739.076
    //         ],
    //         [
    //             1738039885551,
    //             2043112946705.3848
    //         ],
    //         [
    //             1738040176107,
    //             2039754652098.978
    //         ],
    //         [
    //             1738040501963,
    //             2039197919742.278
    //         ],
    //         [
    //             1738040747978,
    //             2042346632519.5312
    //         ],
    //         [
    //             1738041085413,
    //             2042811158221.5945
    //         ],
    //         [
    //             1738041394296,
    //             2041023093898.2432
    //         ],
    //         [
    //             1738041696630,
    //             2037633759478.5544
    //         ],
    //         [
    //             1738041974270,
    //             2042380178232.533
    //         ],
    //         [
    //             1738042295638,
    //             2040767930092.0918
    //         ],
    //         [
    //             1738042574298,
    //             2043088868149.4468
    //         ],
    //         [
    //             1738042836963,
    //             2046142669235.8508
    //         ],
    //         [
    //             1738043180207,
    //             2045249366873.3154
    //         ],
    //         [
    //             1738043455423,
    //             2047617689633.0422
    //         ],
    //         [
    //             1738043793817,
    //             2046641655851.045
    //         ],
    //         [
    //             1738044086617,
    //             2040862349340.991
    //         ],
    //         [
    //             1738044335641,
    //             2040862349340.991
    //         ],
    //         [
    //             1738044674998,
    //             2042945893568.7996
    //         ],
    //         [
    //             1738044938726,
    //             2040895153685.1
    //         ],
    //         [
    //             1738045263592,
    //             2039944091261.6033
    //         ],
    //         [
    //             1738045529464,
    //             2038996588522.7817
    //         ],
    //         [
    //             1738045883943,
    //             2038178746785.191
    //         ],
    //         [
    //             1738046192529,
    //             2039485040117.307
    //         ],
    //         [
    //             1738046491425,
    //             2035419084250.2917
    //         ],
    //         [
    //             1738046763996,
    //             2034118126071.9285
    //         ],
    //         [
    //             1738047032537,
    //             2035572056409.808
    //         ],
    //         [
    //             1738047362818,
    //             2036782441242.9036
    //         ],
    //         [
    //             1738047694815,
    //             2036134691870.3381
    //         ],
    //         [
    //             1738047941946,
    //             2031917476585.7874
    //         ],
    //         [
    //             1738048276184,
    //             2037651279235.2627
    //         ],
    //         [
    //             1738048575544,
    //             2041998053965.2542
    //         ],
    //         [
    //             1738048862880,
    //             2042707255213.9053
    //         ],
    //         [
    //             1738049140739,
    //             2045167312070.7021
    //         ],
    //         [
    //             1738049440813,
    //             2047486184667.3188
    //         ],
    //         [
    //             1738049729746,
    //             2046114775174.189
    //         ],
    //         [
    //             1738050069694,
    //             2040101959218.777
    //         ],
    //         [
    //             1738050362713,
    //             2038711736415.9463
    //         ],
    //         [
    //             1738050634940,
    //             2036906447956.6116
    //         ],
    //         [
    //             1738050981662,
    //             2035489393129.6873
    //         ],
    //         [
    //             1738051261807,
    //             2034675055022.8894
    //         ],
    //         [
    //             1738051529772,
    //             2038001526602.7234
    //         ],
    //         [
    //             1738051863016,
    //             2033842610726.2913
    //         ],
    //         [
    //             1738052153728,
    //             2038008473272.833
    //         ],
    //         [
    //             1738052484933,
    //             2039158348244.4846
    //         ],
    //         [
    //             1738052747492,
    //             2040750452694.7637
    //         ],
    //         [
    //             1738053035269,
    //             2037454858369.6106
    //         ],
    //         [
    //             1738053379246,
    //             2035576185436.276
    //         ],
    //         [
    //             1738053682547,
    //             2035399169594.9104
    //         ],
    //         [
    //             1738053964693,
    //             2038150438767.4106
    //         ],
    //         [
    //             1738054242738,
    //             2036049459469.0332
    //         ],
    //         [
    //             1738054587188,
    //             2037075655808.9778
    //         ],
    //         [
    //             1738054866928,
    //             2038113157463.9673
    //         ],
    //         [
    //             1738055126818,
    //             2039481441778.2356
    //         ],
    //         [
    //             1738055534469,
    //             2036070854680.358
    //         ],
    //         [
    //             1738055716341,
    //             2037977298424.8347
    //         ],
    //         [
    //             1738056075016,
    //             2034553100863.8423
    //         ],
    //         [
    //             1738056328662,
    //             2035253259147.2812
    //         ],
    //         [
    //             1738056675898,
    //             2032807457828.7874
    //         ],
    //         [
    //             1738056947120,
    //             2032751164006.7195
    //         ],
    //         [
    //             1738057250247,
    //             2036473606510.685
    //         ],
    //         [
    //             1738057534819,
    //             2033735916956.2993
    //         ],
    //         [
    //             1738057884021,
    //             2034589578696.109
    //         ],
    //         [
    //             1738058143862,
    //             2034866963641.0688
    //         ],
    //         [
    //             1738058558414,
    //             2039764305416.4587
    //         ],
    //         [
    //             1738058786145,
    //             2037468817861.0103
    //         ],
    //         [
    //             1738059091254,
    //             2039279412079.6453
    //         ],
    //         [
    //             1738059361027,
    //             2040121483223.6304
    //         ],
    //         [
    //             1738059636000,
    //             2044755653746.6443
    //         ],
    //         [
    //             1738059963978,
    //             2040910193786.4856
    //         ],
    //         [
    //             1738060255170,
    //             2041547547600.9043
    //         ],
    //         [
    //             1738060579804,
    //             2039439431926.863
    //         ],
    //         [
    //             1738060839305,
    //             2040416635915.4167
    //         ],
    //         [
    //             1738061152222,
    //             2037389509498.732
    //         ],
    //         [
    //             1738061474464,
    //             2033152087399.35
    //         ],
    //         [
    //             1738061771162,
    //             2033778864168.1274
    //         ],
    //         [
    //             1738062030407,
    //             2035589938541.3716
    //         ],
    //         [
    //             1738062380807,
    //             2036648040007.8486
    //         ],
    //         [
    //             1738062636248,
    //             2036288605458.577
    //         ],
    //         [
    //             1738062962546,
    //             2038569640973.529
    //         ],
    //         [
    //             1738063356157,
    //             2037378771001.682
    //         ],
    //         [
    //             1738063543266,
    //             2037168024419.5166
    //         ],
    //         [
    //             1738063824219,
    //             2034588415554.908
    //         ],
    //         [
    //             1738064183958,
    //             2033629324009.2148
    //         ],
    //         [
    //             1738064489101,
    //             2033231784653.6145
    //         ],
    //         [
    //             1738064762627,
    //             2035402146273.461
    //         ],
    //         [
    //             1738065042554,
    //             2037465510526.47
    //         ],
    //         [
    //             1738065388543,
    //             2036062161030.8652
    //         ],
    //         [
    //             1738065655108,
    //             2036817227113.4158
    //         ],
    //         [
    //             1738065924919,
    //             2036928504256.489
    //         ],
    //         [
    //             1738066276257,
    //             2036928504256.489
    //         ],
    //         [
    //             1738066526587,
    //             2039718747515.1199
    //         ],
    //         [
    //             1738066682000,
    //             2038666825650.1272
    //         ]
    //     ],
    //     "total_volumes": [
    //         [
    //             1737980524300,
    //             60740189320.61126
    //         ],
    //         [
    //             1737980745972,
    //             61101463285.76401
    //         ],
    //         [
    //             1737981083610,
    //             61004611362.43177
    //         ],
    //         [
    //             1737981382095,
    //             61251590239.18886
    //         ],
    //         [
    //             1737981641009,
    //             61951791503.570724
    //         ],
    //         [
    //             1737981958425,
    //             62401218383.01937
    //         ],
    //         [
    //             1737982268650,
    //             54382361133.44597
    //         ],
    //         [
    //             1737982549867,
    //             59653548418.99548
    //         ],
    //         [
    //             1737982830794,
    //             61331265002.57265
    //         ],
    //         [
    //             1737983184518,
    //             59076056141.7319
    //         ],
    //         [
    //             1737983476931,
    //             62603063766.48596
    //         ],
    //         [
    //             1737983730165,
    //             62890177356.160194
    //         ],
    //         [
    //             1737984076658,
    //             63189246371.8536
    //         ],
    //         [
    //             1737984377616,
    //             63607903028.64634
    //         ],
    //         [
    //             1737984674647,
    //             57060020294.57908
    //         ],
    //         [
    //             1737984924314,
    //             64438956670.51419
    //         ],
    //         [
    //             1737985237029,
    //             59438018036.6481
    //         ],
    //         [
    //             1737985566264,
    //             67511161742.2774
    //         ],
    //         [
    //             1737985842713,
    //             68273736758.370575
    //         ],
    //         [
    //             1737986175937,
    //             68482442438.707855
    //         ],
    //         [
    //             1737986464388,
    //             65853220209.72479
    //         ],
    //         [
    //             1737986794735,
    //             53858401056.287254
    //         ],
    //         [
    //             1737987034532,
    //             68768790935.0711
    //         ],
    //         [
    //             1737987338847,
    //             69463046349.89189
    //         ],
    //         [
    //             1737987682350,
    //             69850014069.65819
    //         ],
    //         [
    //             1737987971518,
    //             70250805535.49162
    //         ],
    //         [
    //             1737988354027,
    //             70921888072.19333
    //         ],
    //         [
    //             1737988536942,
    //             71301976317.27824
    //         ],
    //         [
    //             1737988863602,
    //             62129468364.2776
    //         ],
    //         [
    //             1737989182329,
    //             68705672234.587395
    //         ],
    //         [
    //             1737989429462,
    //             73403108889.35063
    //         ],
    //         [
    //             1737989773753,
    //             66250146709.37564
    //         ],
    //         [
    //             1737990123216,
    //             65741200758.58891
    //         ],
    //         [
    //             1737990340465,
    //             71952197094.41974
    //         ],
    //         [
    //             1737990632105,
    //             68283233654.115555
    //         ],
    //         [
    //             1737990986148,
    //             72932956494.87263
    //         ],
    //         [
    //             1737991266339,
    //             75780725195.50354
    //         ],
    //         [
    //             1737991517122,
    //             68242987292.68751
    //         ],
    //         [
    //             1737991826804,
    //             76985144015.7459
    //         ],
    //         [
    //             1737992166075,
    //             70537243273.03893
    //         ],
    //         [
    //             1737992463164,
    //             73989244936.37843
    //         ],
    //         [
    //             1737992735367,
    //             73984492137.15681
    //         ],
    //         [
    //             1737993083371,
    //             75065576538.57727
    //         ],
    //         [
    //             1737993351106,
    //             66167853230.32607
    //         ],
    //         [
    //             1737993684351,
    //             78321331647.49019
    //         ],
    //         [
    //             1737993960680,
    //             72142984197.34259
    //         ],
    //         [
    //             1737994256878,
    //             72210240716.27782
    //         ],
    //         [
    //             1737994586856,
    //             71851748818.28632
    //         ],
    //         [
    //             1737994871081,
    //             73475974528.33641
    //         ],
    //         [
    //             1737995176147,
    //             79276482729.35052
    //         ],
    //         [
    //             1737995485475,
    //             79623902509.18855
    //         ],
    //         [
    //             1737995734601,
    //             79675575928.10066
    //         ],
    //         [
    //             1737996037380,
    //             79934435295.44533
    //         ],
    //         [
    //             1737996374935,
    //             70130650813.83751
    //         ],
    //         [
    //             1737996637913,
    //             81592711937.82382
    //         ],
    //         [
    //             1737996976873,
    //             81377941203.27098
    //         ],
    //         [
    //             1737997287621,
    //             73559188011.44783
    //         ],
    //         [
    //             1737997540108,
    //             79528675085.01105
    //         ],
    //         [
    //             1737997944070,
    //             82300124842.64734
    //         ],
    //         [
    //             1737998163949,
    //             79772261325.92282
    //         ],
    //         [
    //             1737998457150,
    //             77063432079.5116
    //         ],
    //         [
    //             1737998761472,
    //             77474832057.36342
    //         ],
    //         [
    //             1737999059821,
    //             80846677097.88039
    //         ],
    //         [
    //             1737999333787,
    //             77696483515.7829
    //         ],
    //         [
    //             1737999626156,
    //             75809331478.09616
    //         ],
    //         [
    //             1737999963636,
    //             79935967880.69545
    //         ],
    //         [
    //             1738000273673,
    //             73998746660.45505
    //         ],
    //         [
    //             1738000586143,
    //             81439549552.8288
    //         ],
    //         [
    //             1738000833176,
    //             81398783736.6273
    //         ],
    //         [
    //             1738001178281,
    //             82438787668.97047
    //         ],
    //         [
    //             1738001438028,
    //             82152617591.73148
    //         ],
    //         [
    //             1738001774843,
    //             82670617242.76749
    //         ],
    //         [
    //             1738002080930,
    //             81828510248.73982
    //         ],
    //         [
    //             1738002344228,
    //             78807716448.80432
    //         ],
    //         [
    //             1738002630859,
    //             82931626728.25961
    //         ],
    //         [
    //             1738002982785,
    //             83335078778.37364
    //         ],
    //         [
    //             1738003244573,
    //             83260481691.14702
    //         ],
    //         [
    //             1738003516701,
    //             81959948144.02094
    //         ],
    //         [
    //             1738003864620,
    //             74881110178.56421
    //         ],
    //         [
    //             1738004144853,
    //             83731269386.36734
    //         ],
    //         [
    //             1738004724418,
    //             84804539497.0583
    //         ],
    //         [
    //             1738005026618,
    //             84696297117.84875
    //         ],
    //         [
    //             1738005346922,
    //             77971283956.11739
    //         ],
    //         [
    //             1738005688973,
    //             85278673295.7222
    //         ],
    //         [
    //             1738005953222,
    //             83248523511.15695
    //         ],
    //         [
    //             1738006249626,
    //             84212283477.49919
    //         ],
    //         [
    //             1738006588927,
    //             84652128516.52565
    //         ],
    //         [
    //             1738006947143,
    //             84694794844.26268
    //         ],
    //         [
    //             1738007128955,
    //             84005612600.27731
    //         ],
    //         [
    //             1738007430232,
    //             89511912583.42575
    //         ],
    //         [
    //             1738007769695,
    //             89648698446.29665
    //         ],
    //         [
    //             1738008047838,
    //             89975875650.69685
    //         ],
    //         [
    //             1738008381430,
    //             90263701124.9884
    //         ],
    //         [
    //             1738008628056,
    //             90052926868.3328
    //         ],
    //         [
    //             1738008937721,
    //             88054122079.02397
    //         ],
    //         [
    //             1738009245429,
    //             89952561657.4065
    //         ],
    //         [
    //             1738009592849,
    //             91270718193.7966
    //         ],
    //         [
    //             1738009852205,
    //             86479584613.51987
    //         ],
    //         [
    //             1738010127552,
    //             78261153641.67526
    //         ],
    //         [
    //             1738010495204,
    //             86554026819.052
    //         ],
    //         [
    //             1738010734027,
    //             80810806717.87189
    //         ],
    //         [
    //             1738011087531,
    //             83721118170.93933
    //         ],
    //         [
    //             1738011377319,
    //             79892478697.50879
    //         ],
    //         [
    //             1738011696580,
    //             76795794575.84346
    //         ],
    //         [
    //             1738011947686,
    //             74830401012.40591
    //         ],
    //         [
    //             1738012276596,
    //             89936710170.01672
    //         ],
    //         [
    //             1738012531270,
    //             88828034757.98639
    //         ],
    //         [
    //             1738012889862,
    //             81955631821.78017
    //         ],
    //         [
    //             1738013147613,
    //             90344609625.40714
    //         ],
    //         [
    //             1738013487710,
    //             91575880385.25018
    //         ],
    //         [
    //             1738013744275,
    //             83457884038.43062
    //         ],
    //         [
    //             1738014056779,
    //             88671505989.40599
    //         ],
    //         [
    //             1738014365479,
    //             88902302941.13458
    //         ],
    //         [
    //             1738014735269,
    //             79293390033.41371
    //         ],
    //         [
    //             1738014944101,
    //             91659243815.08455
    //         ],
    //         [
    //             1738015282672,
    //             91881014600.98131
    //         ],
    //         [
    //             1738015552248,
    //             89836501592.60274
    //         ],
    //         [
    //             1738015893302,
    //             85910042107.52388
    //         ],
    //         [
    //             1738016175982,
    //             90543043133.54445
    //         ],
    //         [
    //             1738016439549,
    //             89002466737.87479
    //         ],
    //         [
    //             1738016781544,
    //             92298609014.3392
    //         ],
    //         [
    //             1738017065872,
    //             92185578707.73631
    //         ],
    //         [
    //             1738017325993,
    //             95508884071.38567
    //         ],
    //         [
    //             1738017657720,
    //             95164917042.7893
    //         ],
    //         [
    //             1738017940751,
    //             95425634529.6448
    //         ],
    //         [
    //             1738018223777,
    //             96765254302.97044
    //         ],
    //         [
    //             1738018563585,
    //             96564977795.63347
    //         ],
    //         [
    //             1738019226573,
    //             84426672871.56122
    //         ],
    //         [
    //             1738019533821,
    //             95736184938.38771
    //         ],
    //         [
    //             1738019754551,
    //             86400457474.13538
    //         ],
    //         [
    //             1738020043090,
    //             94720800520.01518
    //         ],
    //         [
    //             1738020362380,
    //             87983531074.8883
    //         ],
    //         [
    //             1738020687712,
    //             93916803136.64151
    //         ],
    //         [
    //             1738020950274,
    //             87014654911.24786
    //         ],
    //         [
    //             1738021256840,
    //             93665120016.01526
    //         ],
    //         [
    //             1738021554050,
    //             93496160493.08348
    //         ],
    //         [
    //             1738021868902,
    //             92805769149.32755
    //         ],
    //         [
    //             1738022138804,
    //             93191643783.24739
    //         ],
    //         [
    //             1738022435508,
    //             93724977880.38113
    //         ],
    //         [
    //             1738022775134,
    //             93687397352.26135
    //         ],
    //         [
    //             1738023027938,
    //             93602669828.0324
    //         ],
    //         [
    //             1738023335329,
    //             85639796983.69849
    //         ],
    //         [
    //             1738023744609,
    //             86564130639.41505
    //         ],
    //         [
    //             1738023988645,
    //             86606411708.09303
    //         ],
    //         [
    //             1738024293158,
    //             71164369804.70691
    //         ],
    //         [
    //             1738024512940,
    //             92613638085.2033
    //         ],
    //         [
    //             1738024838888,
    //             93098453531.07683
    //         ],
    //         [
    //             1738025176434,
    //             85060921378.95667
    //         ],
    //         [
    //             1738025487721,
    //             92030597026.126
    //         ],
    //         [
    //             1738025734545,
    //             92195650727.20552
    //         ],
    //         [
    //             1738026325363,
    //             85025810253.08492
    //         ],
    //         [
    //             1738026482930,
    //             77726547352.96432
    //         ],
    //         [
    //             1738026653359,
    //             85530557326.66658
    //         ],
    //         [
    //             1738026926992,
    //             87449531249.21997
    //         ],
    //         [
    //             1738027226994,
    //             88905375649.64043
    //         ],
    //         [
    //             1738027529104,
    //             89965195300.7851
    //         ],
    //         [
    //             1738027824224,
    //             89753526961.34395
    //         ],
    //         [
    //             1738028194824,
    //             89364686185.26122
    //         ],
    //         [
    //             1738028427702,
    //             85284096978.08058
    //         ],
    //         [
    //             1738028737789,
    //             88222412788.75645
    //         ],
    //         [
    //             1738029060155,
    //             81979456967.77524
    //         ],
    //         [
    //             1738029352709,
    //             88580328614.72629
    //         ],
    //         [
    //             1738029674042,
    //             88935906879.51234
    //         ],
    //         [
    //             1738029937743,
    //             87573508607.66335
    //         ],
    //         [
    //             1738030323931,
    //             87693690709.91408
    //         ],
    //         [
    //             1738030585623,
    //             79799544812.21973
    //         ],
    //         [
    //             1738030844220,
    //             88123755937.87778
    //         ],
    //         [
    //             1738031164398,
    //             78669371563.81248
    //         ],
    //         [
    //             1738031503749,
    //             79954464567.48744
    //         ],
    //         [
    //             1738031764090,
    //             83095346304.2659
    //         ],
    //         [
    //             1738032090775,
    //             87541321023.5127
    //         ],
    //         [
    //             1738032362683,
    //             87515060147.23964
    //         ],
    //         [
    //             1738032639538,
    //             76018648754.00546
    //         ],
    //         [
    //             1738032977318,
    //             71566541372.02922
    //         ],
    //         [
    //             1738033299762,
    //             84093532336.27197
    //         ],
    //         [
    //             1738033562821,
    //             86344658973.97318
    //         ],
    //         [
    //             1738033860666,
    //             86699979109.17339
    //         ],
    //         [
    //             1738034145540,
    //             85961234798.37004
    //         ],
    //         [
    //             1738034474998,
    //             85818992088.88907
    //         ],
    //         [
    //             1738034747660,
    //             78215295925.26262
    //         ],
    //         [
    //             1738035097027,
    //             79372131425.83707
    //         ],
    //         [
    //             1738035391368,
    //             86275846868.45001
    //         ],
    //         [
    //             1738035619452,
    //             81328413080.86848
    //         ],
    //         [
    //             1738035966084,
    //             85907937856.20154
    //         ],
    //         [
    //             1738036235605,
    //             86636513687.62082
    //         ],
    //         [
    //             1738036577939,
    //             77713055650.70168
    //         ],
    //         [
    //             1738036817734,
    //             86209825824.30925
    //         ],
    //         [
    //             1738037158867,
    //             85412753192.00948
    //         ],
    //         [
    //             1738037473158,
    //             85802249172.28575
    //         ],
    //         [
    //             1738037754398,
    //             84576327238.76396
    //         ],
    //         [
    //             1738038085043,
    //             85451229295.1815
    //         ],
    //         [
    //             1738038356042,
    //             85518982842.68785
    //         ],
    //         [
    //             1738038676882,
    //             85732902782.8908
    //         ],
    //         [
    //             1738038945299,
    //             80385210289.96739
    //         ],
    //         [
    //             1738039261309,
    //             85876211535.22137
    //         ],
    //         [
    //             1738039561272,
    //             79963126922.1356
    //         ],
    //         [
    //             1738039885551,
    //             71751958346.64429
    //         ],
    //         [
    //             1738040176107,
    //             81414501113.43474
    //         ],
    //         [
    //             1738040501963,
    //             76691997887.8302
    //         ],
    //         [
    //             1738040747978,
    //             84623473179.6188
    //         ],
    //         [
    //             1738041085413,
    //             75734712043.56973
    //         ],
    //         [
    //             1738041394296,
    //             84039972558.05695
    //         ],
    //         [
    //             1738041696630,
    //             84022184562.9306
    //         ],
    //         [
    //             1738041974270,
    //             76839972942.90509
    //         ],
    //         [
    //             1738042295638,
    //             77239211121.44664
    //         ],
    //         [
    //             1738042574298,
    //             77754260961.7122
    //         ],
    //         [
    //             1738042836963,
    //             83386326421.28896
    //         ],
    //         [
    //             1738043180207,
    //             71096487246.16206
    //         ],
    //         [
    //             1738043455423,
    //             64574913635.04002
    //         ],
    //         [
    //             1738043793817,
    //             82886782442.5565
    //         ],
    //         [
    //             1738044086617,
    //             81916066066.0825
    //         ],
    //         [
    //             1738044335641,
    //             81785664423.18874
    //         ],
    //         [
    //             1738044674998,
    //             81180418473.08438
    //         ],
    //         [
    //             1738044938726,
    //             80983718106.13792
    //         ],
    //         [
    //             1738045263592,
    //             70017698833.04616
    //         ],
    //         [
    //             1738045529464,
    //             80203328872.63625
    //         ],
    //         [
    //             1738045883943,
    //             75675758181.41415
    //         ],
    //         [
    //             1738046192529,
    //             76848626390.71196
    //         ],
    //         [
    //             1738046491425,
    //             78905374882.40025
    //         ],
    //         [
    //             1738046763996,
    //             78269022147.50021
    //         ],
    //         [
    //             1738047032537,
    //             77754895596.66931
    //         ],
    //         [
    //             1738047362818,
    //             77745399365.5182
    //         ],
    //         [
    //             1738047694815,
    //             71259163318.72241
    //         ],
    //         [
    //             1738047941946,
    //             76676705326.92749
    //         ],
    //         [
    //             1738048276184,
    //             76812952152.41258
    //         ],
    //         [
    //             1738048575544,
    //             61723562044.80574
    //         ],
    //         [
    //             1738048862880,
    //             62144987242.90673
    //         ],
    //         [
    //             1738049140739,
    //             74583004878.22935
    //         ],
    //         [
    //             1738049440813,
    //             63582809294.40562
    //         ],
    //         [
    //             1738049729746,
    //             74292044035.87144
    //         ],
    //         [
    //             1738050069694,
    //             67113155647.113754
    //         ],
    //         [
    //             1738050362713,
    //             65060877217.532005
    //         ],
    //         [
    //             1738050634940,
    //             67407660834.66001
    //         ],
    //         [
    //             1738050981662,
    //             60398882750.27419
    //         ],
    //         [
    //             1738051261807,
    //             61774038441.5233
    //         ],
    //         [
    //             1738051529772,
    //             66582888566.46886
    //         ],
    //         [
    //             1738051863016,
    //             71494336369.40056
    //         ],
    //         [
    //             1738052153728,
    //             65863351802.28103
    //         ],
    //         [
    //             1738052484933,
    //             71183744468.26825
    //         ],
    //         [
    //             1738052747492,
    //             62121258815.38282
    //         ],
    //         [
    //             1738053035269,
    //             70796244405.12944
    //         ],
    //         [
    //             1738053379246,
    //             65011546738.63315
    //         ],
    //         [
    //             1738053682547,
    //             70459922602.95796
    //         ],
    //         [
    //             1738053964693,
    //             65133891099.986565
    //         ],
    //         [
    //             1738054242738,
    //             64751206204.09399
    //         ],
    //         [
    //             1738054587188,
    //             60411795835.418724
    //         ],
    //         [
    //             1738054866928,
    //             69613781592.17575
    //         ],
    //         [
    //             1738055126818,
    //             69246802433.28517
    //         ],
    //         [
    //             1738055534469,
    //             68979165583.09927
    //         ],
    //         [
    //             1738055716341,
    //             68853360118.32484
    //         ],
    //         [
    //             1738056075016,
    //             69057510153.71808
    //         ],
    //         [
    //             1738056328662,
    //             68730844632.41696
    //         ],
    //         [
    //             1738056675898,
    //             68755670992.49849
    //         ],
    //         [
    //             1738056947120,
    //             68836367404.20769
    //         ],
    //         [
    //             1738057250247,
    //             68526036735.78816
    //         ],
    //         [
    //             1738057534819,
    //             63031301705.07119
    //         ],
    //         [
    //             1738057884021,
    //             62833378977.356865
    //         ],
    //         [
    //             1738058143862,
    //             67978545863.35603
    //         ],
    //         [
    //             1738058558414,
    //             57368133404.35514
    //         ],
    //         [
    //             1738058786145,
    //             64523176621.890526
    //         ],
    //         [
    //             1738059091254,
    //             61270135093.23951
    //         ],
    //         [
    //             1738059361027,
    //             64231870200.6475
    //         ],
    //         [
    //             1738059636000,
    //             68039370577.61367
    //         ],
    //         [
    //             1738059963978,
    //             67476140050.20348
    //         ],
    //         [
    //             1738060255170,
    //             61855486542.66281
    //         ],
    //         [
    //             1738060579804,
    //             66995686505.81054
    //         ],
    //         [
    //             1738060839305,
    //             67000748585.26301
    //         ],
    //         [
    //             1738061152222,
    //             67001187336.7213
    //         ],
    //         [
    //             1738061474464,
    //             60143132456.325195
    //         ],
    //         [
    //             1738061771162,
    //             63362935768.653366
    //         ],
    //         [
    //             1738062030407,
    //             58627230785.891106
    //         ],
    //         [
    //             1738062380807,
    //             57912408528.43591
    //         ],
    //         [
    //             1738062636248,
    //             60534234530.761986
    //         ],
    //         [
    //             1738062962546,
    //             60464281327.10329
    //         ],
    //         [
    //             1738063356157,
    //             64499066524.18835
    //         ],
    //         [
    //             1738063543266,
    //             60771329392.8638
    //         ],
    //         [
    //             1738063824219,
    //             64615579337.80275
    //         ],
    //         [
    //             1738064183958,
    //             57583460437.47622
    //         ],
    //         [
    //             1738064489101,
    //             63629225250.36388
    //         ],
    //         [
    //             1738064762627,
    //             59178568498.44811
    //         ],
    //         [
    //             1738065042554,
    //             59355883689.86749
    //         ],
    //         [
    //             1738065388543,
    //             59432798989.08057
    //         ],
    //         [
    //             1738065655108,
    //             58932805093.06194
    //         ],
    //         [
    //             1738065924919,
    //             61974036556.64709
    //         ],
    //         [
    //             1738066276257,
    //             63759767767.90536
    //         ],
    //         [
    //             1738066526587,
    //             63442048731.85247
    //         ],
    //         [
    //             1738066682000,
    //             63586088929.73214
    //         ]
    //     ]
    // }

    const fetchHistoricalData = async (id, days = 365, currency) => {
        // const res = await fetch(`https://api.coingecko.com/api/v3/coins/${id}/market_chart?vs_currency=${currency.name}&days=${days}`);
        const res = await fetch(`https://api.coingecko.com/api/v3/coins/${id}/market_chart?vs_currency=${currency.name}&days=${days}`);

        const data = await res.json();
        setHistoricalData(data)
    }

    useEffect(() => {
        fetchHistoricalData(id, days, currency)
    }, [days, currency])



    const chartDays = [
        {
            label: "24 Hours",
            value: 1,
        },
        {
            label: "30 Days",
            value: 30,
        },
        {
            label: "3 Months",
            value: 90,
        },
        {
            label: "1 Year",
            value: 365,
        },
    ];

    return (
        <div className='flex flex-col items-center w-[70%] p-6'>


            {!historicalData ?
                <CircularProgress
                    size={125}
                    thickness={1}
                    color='white'
                />
                :
                <>
                    <Line
                        data={{
                            labels: historicalData.prices.map((coin) => {

                                const date = new Date(coin[0]);
                                const time = date.getHours() > 12 ?
                                    `${date.getHours() - 12}:${date.getMinutes()} PM` :
                                    `${date.getHours()}:${date.getMinutes()} AM`;

                                return days === 1 ? time : date.toLocaleDateString();

                            }),
                            datasets: [
                                {
                                    data: historicalData.prices.map((coin) => coin[1]),
                                    label: `Price (Past ${days} Days) in ${currency.name}`,
                                    borderColor: `${isDarkMode ? "white" : "black"}`,
                                    backgroundColor: `${isDarkMode ? "white" : "black"}`,
                                }
                            ]
                        }}
                        options={{
                            elements: {
                                point: {
                                    radius: 1,
                                }
                            },
                            scales: {
                                x: {
                                    ticks: {
                                        color: isDarkMode ? "orange" : "black",
                                    },
                                    grid: {
                                        color: isDarkMode ? "black" : "white",
                                    }
                                },
                                y: {
                                    ticks: {
                                        color: isDarkMode ? "orange" : "black",
                                    },
                                    grid: {
                                        color: isDarkMode ? "black" : "white",
                                    }
                                },

                            }
                        }}
                    />



                    <div className='flex w-full justify-between p-6 '>
                        {
                            chartDays.map((day) => {
                                return (
                                    <SelectButton
                                        key={day.value}
                                        onClick={() => setDays(day.value)}
                                        selected={day.value === days}
                                    >
                                        {day.label}
                                    </SelectButton>
                                )
                            }
                            )
                        }
                    </div>
                </>

            }

        </div>
    )
}

export default CoinChart
